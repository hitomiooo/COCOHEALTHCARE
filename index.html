<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ぴーぴ健康管理手帳 (Firebase版)</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>ぴーぴ健康管理手帳 🐾</h1>
    </header>

    <div id="authSection">
        <p id="authStatus">🔄 認証状態を確認中...</p>
        <button id="loginButton" style="display: none;">Googleアカウントでログイン</button>
        <button id="logoutButton" style="display: none;">ログアウト</button>
    </div>

    <main id="mainContent" style="display: none;">
        
        <form id="healthForm">
            <input type="hidden" id="recordId">
            
            <h3>記録フォーム</h3>
            
            <label for="date">日付:</label>
            <input type="date" id="date" required>

            <label>一覧用マーク（重要な日）:</label>
            <div class="mark-group">
                <label class="mark-option">
                    <input type="radio" name="eventMark" value="" checked>
                    <span>なし</span>
                </label>
                <label class="mark-option">
                    <input type="radio" name="eventMark" value="🏥">
                    <span>🏥 病院</span>
                </label>
                <label class="mark-option">
                    <input type="radio" name="eventMark" value="⚠️">
                    <span>⚠️ 注意</span>
                </label>
                <label class="mark-option">
                    <input type="radio" name="eventMark" value="✨">
                    <span>✨ 特別</span>
                </label>
                <label class="mark-option">
                    <input type="radio" name="eventMark" value="💉">
                    <span>💉 注射</span>
                </label>
            </div>
            <label>天気（2つまで選択可）:</label>
            <div class="weather-btn-group" id="weatherBtnGroup">
                <button type="button" data-val="☀️">☀️</button>
                <button type="button" data-val="☁️">☁️</button>
                <button type="button" data-val="☂️">☂️</button>
                <button type="button" data-val="☃️">☃️</button>
            </div>
            <input type="text" id="weather" readonly placeholder="ボタンを押して選択" style="background-color: #f9f9f9; cursor: default;">
            
            <label for="temperatureFeel">体感気温👫:</label>
            <select id="temperatureFeel">
                <option value="暑い">暑い</option>
                <option value="寒い">寒い</option>
                <option value="ちょうどいい">ちょうどいい</option>
            </select>

            <fieldset>
                <legend>体調チェック💪</legend>
                <label for="conditionCoco">ココ:</label>
                <select id="conditionCoco">
                    <option value="○">○</option>
                    <option value="△">△</option>
                    <option value="×">×</option>
                </select>
                <label for="conditionNono">ノノ:</label>
                <select id="conditionNono">
                    <option value="○">○</option>
                    <option value="△">△</option>
                    <option value="×">×</option>
                </select>
                <label for="conditionMomo">モモ:</label>
                <select id="conditionMomo">
                    <option value="○">○</option>
                    <option value="△">△</option>
                    <option value="×">×</option>
                </select>
                <label for="conditionBibi">ビビ:</label>
                <select id="conditionBibi">
                    <option value="○">○</option>
                    <option value="△">△</option>
                    <option value="×">×</option>
                </select>
            </fieldset>

            <fieldset class="checkbox-group">
                <legend>服用中薬💊</legend>
                <label><input type="checkbox" id="medPimo" checked> ピモベハート（ココ）</label>
                <label><input type="checkbox" id="medLactu" checked> ラクツロース（ココ）</label>
                <label><input type="checkbox" id="medConseve" checked> コンセーブ（ココ）</label>
                <label><input type="checkbox" id="medPrega" checked> プレガバリン（モモ）</label>
                <label><input type="checkbox" id="medOther" checked> その他　</label>
            </fieldset>

            <fieldset class="checkbox-group">
                <legend>ココお通じ💩（回数・質はメモ欄へ）</legend>
                <label><input type="checkbox" id="poopMorning"> 朝</label>
                <label><input type="checkbox" id="poopNoon"> 昼</label>
                <label><input type="checkbox" id="poopWalk"> 散歩時</label>
                <label><input type="checkbox" id="poopNight"> 夜</label>
            </fieldset>

            <fieldset>
                <legend>食欲🍖</legend>
                <label for="appetiteMorning">朝:</label>
                <select id="appetiteMorning">
                    <option value="完食">完食</option>
                    <option value="少し残す">少し残す</option>
                    <option value="半分">半分</option>
                    <option value="ほぼ食べず">ほぼ食べず</option>
                </select>
                <label for="appetiteNoon">昼:</label>
                <select id="appetiteNoon">
                    <option value="完食">完食</option>
                    <option value="少し残す">少し残す</option>
                    <option value="半分">半分</option>
                    <option value="ほぼ食べず">ほぼ食べず</option>
                </select>
                <label for="appetiteNight">晩:</label>
                <select id="appetiteNight">
                    <option value="完食">完食</option>
                    <option value="少し残す">少し残す</option>
                    <option value="半分">半分</option>
                    <option value="ほぼ食べず">ほぼ食べず</option>
                </select>
            </fieldset>

            <label for="sleepTime">睡眠の様子:</label>
            <select id="sleepTime">
                <option value="ずっと寝てる">ずっと寝てる</option>
                <option value="起きてる時間が長い">起きてる時間が長い</option>
                <option value="寝たり起きたり移動多い">寝たり起きたり移動多い</option>
            </select>

            <label for="walk">散歩:</label>
            <select id="walk">
                <option value="行ってない">行ってない</option>
                <option value="庭">庭</option>
                <option value="時又">時又</option>
                <option value="アジア電子">アジア電子</option>
            </select>

            <label for="dogPhoto">今日のぴーぴ 📸:</label>
            <input type="file" id="dogPhoto" accept="image/*">
            <div id="photoPreview" class="photo-preview"></div>

            <label for="otherNotes">その他（メモ）:</label>
            <div id="stampPad" class="stamp-pad">
                <button type="button" class="stamp-btn">ココ</button>
                <button type="button" class="stamp-btn">ノノ</button>
                <button type="button" class="stamp-btn">モモ</button>
                <button type="button" class="stamp-btn">ビビ</button>
                <button type="button" class="stamp-btn">💩</button>
                <button type="button" class="stamp-btn">💧</button>
                <button type="button" class="stamp-btn">👍</button>
                <button type="button" class="stamp-btn">🏥</button>
                <button type="button" class="stamp-btn">💊</button>
                <button type="button" class="stamp-btn">❤️</button>
                <button type="button" class="stamp-btn">🍖</button>
                <button type="button" class="stamp-btn">💮</button>
                <button type="button" class="stamp-btn">✖</button>
                <button type="button" class="stamp-btn">😺</button>
                <button type="button" class="stamp-btn">🤮</button>
                <button type="button" class="stamp-btn">🤒</button>
                <button type="button" class="stamp-btn">達・</button>
                <button type="button" class="stamp-btn">仁・</button>
                <button type="button" class="stamp-btn">血尿</button>
                <button type="button" class="stamp-btn">逆くしゃみ</button>
                <button type="button" class="stamp-btn">咳</button>
                <button type="button" class="stamp-btn">下痢</button>
                <button type="button" class="stamp-btn">30日、フィラリア</button>
                <button type="button" class="stamp-btn">10日、トルコキシル</button>
                <button type="button" class="stamp-btn">25日、トルコキシル</button>
                <button type="button" class="stamp-btn">マロピタット</button>
            </div>
            <textarea id="otherNotes" rows="3" placeholder="メモ・気になることはこちらへ"></textarea>
            
            <button type="submit" id="saveButton">記録する</button>
            <button type="button" id="deleteButton" class="delete-btn" style="display: none;">この日の記録を削除</button>
        </form>

        <hr>

        <h2>これまでの記録</h2>
        <div id="recordList">
            <p>🔄 データを読み込み中...</p>
        </div>
    </main>

    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js" type="module"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore.js" type="module"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth.js" type="module"></script>

    <script src="script.js" type="module"></script>
</body>
</html>
